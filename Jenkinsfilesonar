
pipeline{
agent any 
stages{
stage('scm checkout')
{

steps{
           git branch: 'master', url: 'https://github.com/shubhampareek1513/maven-sonar.git'

}
}

stage('sonar and maven package')
{
steps{

withSonarQubeEnv('sonar'){
    withMaven(maven: 'local-mvn') {
      sh 'mvn install sonar:sonar'
}
}
}
}
stage(deploy to tomcat){

steps{

sshagent(['cicd']) {
    sh 'scp -o StrictHostKeyChecking=no */tagget/*.war  ec2-user@172.31.40.48:usr/share/tomcat/webapp'
}}}

}
}
